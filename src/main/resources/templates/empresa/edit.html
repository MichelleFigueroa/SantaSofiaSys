<!DOCTYPE html>
<html lang="es"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/layouts/_mainLayout"
      xmlns:th="http://www.thymeleaf.org">

<div layout:fragment="content" class="d-flex justify-content-center align-items-center min-vh-100 bg-light">

    <div class="card shadow-lg border-0 w-100" style="max-width: 800px; border-radius: 20px;">
        <div class="card-body p-4">

            <!-- Mensajes de error (opcional usando SweetAlert2) -->
            <div th:if="${error != null}">
                <script th:inline="javascript">
                    Swal.fire({
                        title: "❌ Error de validación",
                        text: /*[[${error}]]*/ '',
                        icon: "error",
                        confirmButtonColor: "#d33"
                    });
                </script>
            </div>

            <!-- Título -->
            <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
                <h2 class="fw-bold text-primary mb-0">
                    <i class="bi bi-pencil-square"></i> Editar Empresa
                </h2>
            </div>

            <!-- FORMULARIO -->
            <form th:action="@{/empresas/update}" method="post" class="needs-validation" novalidate>
                <input type="hidden" name="id" th:value="${empresa.id}" />

                <!-- Distrito -->
                <div class="mb-3">
                    <label for="distrito" class="form-label fw-bold">Distrito:</label>
                    <select id="distrito" name="distritoId" class="form-select" required>
                        <option value="" disabled>-- Selecciona un distrito --</option>
                        <option th:each="distrito : ${distritos}"
                                th:value="${distrito.id}"
                                th:text="${distrito.nombre}"
                                th:selected="${distrito.id} == ${empresa.distrito.id}">
                        </option>
                    </select>
                </div>

                <!-- Nombre -->
                <div class="mb-3">
                    <label for="nombre" class="form-label fw-bold">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" class="form-control"
                           th:value="${empresa.nombre}" required>
                </div>

                <!-- NIT y NRC -->
                <div class="row g-3 mb-3">
                    <div class="col-md-6">
                        <label for="NIT" class="form-label fw-bold">NIT:</label>
                        <input type="text" id="NIT" name="NIT" class="form-control"
                               th:value="${empresa.NIT}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="NRC" class="form-label fw-bold">NRC:</label>
                        <input type="text" id="NRC" name="NRC" class="form-control"
                               th:value="${empresa.NRC}" required>
                    </div>
                </div>

                <!-- Sucursal -->
                <div class="mb-3">
                    <label for="sucursal" class="form-label fw-bold">Sucursal:</label>
                    <input type="text" id="sucursal" name="sucursal" class="form-control"
                           th:value="${empresa.sucursal}" required>
                </div>

                <!-- Teléfono y Email -->
                <div class="row g-3 mb-3">
                    <div class="col-md-6">
                        <label for="telefono" class="form-label fw-bold">Teléfono:</label>
                        <input type="text" id="telefono" name="telefono" class="form-control"
                               th:value="${empresa.telefono}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="email" class="form-label fw-bold">Email:</label>
                        <input type="email" id="email" name="email" class="form-control"
                               th:value="${empresa.email}" required>
                    </div>
                </div>

                <!-- Dirección -->
                <div class="mb-3">
                    <label for="direccion" class="form-label fw-bold">Dirección:</label>
                    <textarea id="direccion" name="direccion" class="form-control" rows="3" required
                              th:text="${empresa.direccion}"></textarea>
                </div>

                <!-- Botones -->
                <div class="d-flex justify-content-end gap-2 mt-4">
                    <button type="submit" class="btn btn-success shadow-sm">
                        <i class="bi bi-save-fill"></i> Guardar Cambios
                    </button>
                    <a th:href="@{/empresas}" class="btn btn-secondary shadow-sm">
                        <i class="bi bi-x-circle-fill"></i> Cancelar
                    </a>
                </div>

            </form>
        </div>
    </div>
</div>
</html>
