<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="https://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/layouts/_mainLayout">

<div layout:fragment="content">

    <!-- Mostrar mensaje de confirmación en caso de éxito -->
    <div th:if="${msg != null}">
        <script>
            Swal.fire({
                icon: 'success',
                title: 'Éxito',
                text: /*[[${msg}]]*/,
                confirmButtonText: 'Aceptar'
            });
        </script>
    </div>

    <div class="container mt-4">
        <h1 class="mb-4">Listado de Clientes</h1>

        <!-- Botón para crear nuevo cliente -->
        <a th:href="@{/clientes/create}" class="btn btn-primary mb-3">Nuevo Cliente</a>

        <!-- Tabla de clientes -->
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Municipio</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Teléfono</th>
                    <th>Correo Electrónico</th>
                    <th>DUI</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="cliente : ${clientes}">
                    <td th:text="${cliente.idCliente}"></td>
                    <td th:text="${cliente.idMunicipio}"></td>
                    <td th:text="${cliente.nombre}"></td>
                    <td th:text="${cliente.apellido}"></td>
                    <td th:text="${cliente.telefono}"></td>
                    <td th:text="${cliente.correoElectronico}"></td>
                    <td th:text="${cliente.dui}"></td>
                    <td>
                        <a th:href="@{/clientes/details/{id}(id=${cliente.idCliente})}"
                           class="btn btn-info btn-sm">Ver</a>
                        <a th:href="@{/clientes/edit/{id}(id=${cliente.idCliente})}"
                           class="btn btn-warning btn-sm">Editar</a>
                        <a th:href="@{/clientes/delete/{id}(id=${cliente.idCliente})}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('¿Seguro que deseas eliminar este cliente?');">Eliminar</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
</html>
